# edward-example
An example set of microservices to demonstrate the Edward tool

## Services

This project includes 4 services:

* **front**: Provides a UI for interacting with the other three services
* **lasttouch**: RPC service to track the time at which a button was most recently pressed
* **fibonacci**: RPC service that iterates throught the Fibonacci sequence
* **messages**: RPC service that stores simple messages in a database

## Database

A PostgreSQL database is provided for the messages service. This database is configured using Docker Compose. Once the database container is created, you may need to add the messages table:

    CREATE TABLE Message (Message VARCHAR(255));
    
## Listing Services

    $ edward list
    
Will show a list of all the services and groups in the working directory.

## Running Services

By default, *front* and *lasttouch* are configured in the `edward.json` file under the group **app**. These can be started out of the box with the command:

    $ edward start app
   
The fibonacci service can be started subsequently with the command:

    $ edward start fibonacci

You can view the logs for these services all together:

    $ edward tail app fibonacci
    
You can also edit the `edward.json` file to add *fibonacci* to the *app* group.
    
Or one at a time:

    $ edward tail front
    
Once the services are started, you can see their status, including the port on which they are listening by running:

    $ edward status
    
You will be able to see that *front* is listening on port 8080, so you can visit [http://127.0.0.1:8080](http://127.0.0.1:8080) to use the UI.

## Autorestart

In the `edward.json` file, you will notice that *front* has a config field called **watch**, this defines a directory to be monitored for changes.

If you edit the file `front/main.go` while *front* is running, Edward will automatically restart the service. This will be visible in the logs.

## Generating config

By default, there is no configuration for the *messages* service, but it can be automatically generated by running:

    $ edward generate
    
This will report finding all 4 services, but will only add configuration for services that do not already have configuration.

Once this has run, you can start *messages*:

    $ edward start database messages

## Stopping Services

All services can be stopped by running:

    $ edward stop
